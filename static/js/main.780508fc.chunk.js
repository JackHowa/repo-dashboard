(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(t,e,n){t.exports=n(17)},16:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(9),u=n.n(r),s=(n(16),n(7)),c=n(6),i=n(1),l=n(2),p=n(4),h=n(3),f=n(5),v={GITHUB_REPOS_API:"https://api.github.com/repos/",VOTE_COUNTER_API:"https://enigmatic-hollows-17650.herokuapp.com/api/votes",REFRESH_RATE:1e3},E={REACT:"React",ANGULAR:"AngularJS",EMBER:"Ember.js",VUE:"Vue.js"},m=function(t){var e=t.title,n=t.value;return o.a.createElement("p",null,e,": ",n)},d={REACT:"facebook/react",ANGULAR:"angular/angular.js",EMBER:"emberjs/ember.js",VUE:"vuejs/vue"},O={STARGAZERS_COUNT:"stargazers_count",FORKS_COUNT:"forks_count",OPEN_ISSUES:"open_issues"},S={STARGAZERS_COUNT:"Stargazers Count",FORKS_COUNT:"Forks Count",OPEN_ISSUES:"Open Issues"},R=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(p.a)(this,Object(h.a)(e).call(this,t))).renderStatValues=function(){var t=n.state.statKeyValues;return n.props.targetStats.map(function(e){var n=0,a=t.find(function(t){return t[e]})||0;if(0!==a){var r=Object.values(a);n=Object(s.a)(r,1)[0]}return o.a.createElement(m,{key:e,title:S[e],value:n})})},n.state={statKeyValues:[]},n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.findStats(),this.interval=setInterval(function(){return t.findStats()},v.REFRESH_RATE)}},{key:"shouldComponentUpdate",value:function(t,e){var n=this.state.statKeyValues;return e.statKeyValues!==n||t!==this.props}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"findStats",value:function(){var t=this,e=this.props,n=e.repoName,a=e.targetStats;fetch("".concat(v.GITHUB_REPOS_API).concat(d[n])).then(function(t){return t.json()}).then(function(e){var n=a.map(function(t){return Object(c.a)({},t,e[O[t]])});t.setState({statKeyValues:n})})}},{key:"render",value:function(){var t=this.props.targetStats,e=this.state.statKeyValues;return o.a.createElement("div",null,e&&e.length>1?this.renderStatValues():t.map(function(t){return o.a.createElement(m,{key:t,title:S[t],value:0})}))}}]),e}(a.Component),C=["STARGAZERS_COUNT","FORKS_COUNT","OPEN_ISSUES"],b=function(t){function e(){return Object(i.a)(this,e),Object(p.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(l.a)(e,[{key:"postVote",value:function(){var t=this.props,e=t.repoName,n=t.checkVoteCount,a={repoName:e,amount:1};fetch(v.VOTE_COUNTER_API,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){!0===t.success&&n()})}},{key:"render",value:function(){var t=this,e=this.props,n=e.repoName,a=e.voteCount,r=e.isLoaded,u=E[n];return o.a.createElement("div",null,o.a.createElement("h1",null,u),o.a.createElement(R,{repoName:n,targetStats:C}),o.a.createElement("button",{type:"button",onClick:function(){return t.postVote()}},"Vote"),o.a.createElement(m,{title:"Vote Count",value:r?a:""}))}}]),e}(a.Component),j=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(p.a)(this,Object(h.a)(e).call(this,t))).countVotes=function(){fetch(v.VOTE_COUNTER_API).then(function(t){return t.json()}).then(function(t){var e=t.data.map(function(t){return Object(c.a)({},t._id,t.totalVotes)});n.setState({isLoaded:!0,repoCounts:e})})},n.checkVoteCount=function(){return n.countVotes()},n.state={repoCounts:[],isLoaded:!1},n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.countVotes(),this.updateVotes=setInterval(function(){return t.countVotes()},v.REFRESH_RATE)}},{key:"shouldComponentUpdate",value:function(t,e){var n=this.state.repoCounts;return e.repoCounts!==n||t!==this.props}},{key:"componentWillUnmount",value:function(){clearInterval(this.updateVotes)}},{key:"render",value:function(){var t=this,e=this.props.targetRepoNames,n=this.state,a=n.repoCounts,r=n.isLoaded;return o.a.createElement("div",null,e.map(function(e){var n=a.find(function(t){return t[e]})||0;if(0!==n){var u=Object.values(n);n=Object(s.a)(u,1)[0]}return o.a.createElement(b,{key:e,repoName:e,voteCount:n,isLoaded:r,checkVoteCount:t.checkVoteCount})}))}}]),e}(a.Component),V=["REACT","ANGULAR","EMBER","VUE"],k=function(){return o.a.createElement(j,{targetRepoNames:V})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.780508fc.chunk.js.map