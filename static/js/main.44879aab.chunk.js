(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(t,e,n){t.exports=n(17)},16:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(9),u=n.n(r),s=(n(16),n(7)),i=n(6),c=n(1),l=n(2),m=n(4),p=n(3),h=n(5),d={GITHUB_REPOS_API:"https://api.github.com/repos/",VOTE_COUNTER_API:"https://enigmatic-hollows-17650.herokuapp.com/api/votes",REFRESH_RATE:1e3},f={REACT:"React",ANGULAR:"AngularJS",EMBER:"Ember.js",VUE:"Vue.js"},v=function(t){var e=t.title,n=t.value;return o.a.createElement("p",null,e,": ",n)},E={REACT:"facebook/react",ANGULAR:"angular/angular.js",EMBER:"emberjs/ember.js",VUE:"vuejs/vue"},O={STARGAZERS_COUNT:"stargazers_count",FORKS_COUNT:"forks_count",OPEN_ISSUES:"open_issues"},S={STARGAZERS_COUNT:"Stargazers Count",FORKS_COUNT:"Forks Count",OPEN_ISSUES:"Open Issues"},V=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(m.a)(this,Object(p.a)(e).call(this,t))).renderStatValues=function(){var t=n.state.statKeyValues;return n.props.targetStats.map(function(e){var n=0,a=t.find(function(t){return t[e]})||0;if(0!==a){var r=Object.values(a);n=Object(s.a)(r,1)[0]}return o.a.createElement(v,{key:e,title:S[e],value:n})})},n.state={statKeyValues:[]},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.findStats(),this.interval=setInterval(function(){return t.findStats()},d.REFRESH_RATE)}},{key:"shouldComponentUpdate",value:function(t,e){var n=this.state.statKeyValues;return e.statKeyValues!==n||t!==this.props}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"findStats",value:function(){var t=this,e=this.props,n=e.repoName,a=e.targetStats;fetch("".concat(d.GITHUB_REPOS_API).concat(E[n])).then(function(t){return t.json()}).then(function(e){var n=a.map(function(t){return Object(i.a)({},t,e[O[t]])});t.setState({statKeyValues:n})})}},{key:"render",value:function(){var t=this.props.targetStats,e=this.state.statKeyValues;return o.a.createElement("div",null,e&&e.length>1?this.renderStatValues():t.map(function(t){return o.a.createElement(v,{key:t,title:S[t],value:0})}))}}]),e}(a.Component),b=["STARGAZERS_COUNT","FORKS_COUNT","OPEN_ISSUES"],y=function(t){function e(){return Object(c.a)(this,e),Object(m.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"postVote",value:function(){var t=this.props,e=t.repoName,n=t.checkVoteCount,a=t.toggleVoteButtons,o={repoName:e,emailAddress:t.emailAddress,amount:1};fetch(d.VOTE_COUNTER_API,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){!0===t.success?(n(),a()):alert("There was an issue with voting")})}},{key:"render",value:function(){var t=this,e=this.props,n=e.repoName,a=e.voteCount,r=e.isLoaded,u=e.showVoteButtons,s=f[n];return o.a.createElement("div",null,o.a.createElement("h2",null,s),o.a.createElement(V,{repoName:n,targetStats:b}),u?o.a.createElement("button",{type:"button",onClick:function(){return t.postVote()}},"Vote"):o.a.createElement("div",null),o.a.createElement(v,{title:"Vote Count",value:r?a:""}))}}]),e}(a.Component);y.defaultProps={emailAddress:""};var C=y,g=function(t){var e=t.submitFunction,n=t.label,a=t.value,r=t.onChangeFunction,u=t.inputType;return o.a.createElement("form",{onSubmit:e},o.a.createElement("label",{htmlFor:n},n,o.a.createElement("input",{type:u,name:n,value:a,onChange:r})),o.a.createElement("input",{type:"submit",value:"Submit"}))};g.defaultProps={inputType:"text"};var R=g,A=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(m.a)(this,Object(p.a)(e).call(this,t))).countVotes=function(){fetch(d.VOTE_COUNTER_API).then(function(t){return t.json()}).then(function(t){var e=t.data.map(function(t){return Object(i.a)({},t._id,t.totalVotes)});n.setState({isLoaded:!0,repoCounts:e})})},n.checkVoteCount=function(){return n.countVotes()},n.submitName=function(t){t.preventDefault();var e=n.state.emailAddress;fetch("".concat(d.VOTE_COUNTER_API,"/").concat(e)).then(function(t){return t.json()}).then(function(t){if(!1===t.alreadyVoted&&""===document.cookie)document.cookie=e,n.toggleVoteButtons();else{var a=t.repoName;a?alert("".concat(e," already voted for ").concat(a)):alert("You or someone else on this machine already voted")}})},n.toggleVoteButtons=function(){return n.setState(function(t){return{showVoteButtons:!t.showVoteButtons}})},n.handleChange=function(t){return n.setState({emailAddress:t.target.value})},n.state={repoCounts:[],isLoaded:!1,emailAddress:"",showVoteButtons:!1},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.countVotes(),this.updateVotes=setInterval(function(){return t.countVotes()},d.REFRESH_RATE)}},{key:"shouldComponentUpdate",value:function(t,e){return e!==this.state||t!==this.props}},{key:"componentWillUnmount",value:function(){clearInterval(this.updateVotes)}},{key:"render",value:function(){var t=this,e=this.props.targetRepoNames,n=this.state,a=n.repoCounts,r=n.isLoaded,u=n.showVoteButtons,i=n.emailAddress;return o.a.createElement("div",{style:{display:"flex",flexDirection:"column",textAlign:"center"}},o.a.createElement("h1",null,"Client-Side JavaScript Framework Dashboard"),o.a.createElement("p",null,"Enter an email to vote! You can only vote once."),o.a.createElement(R,{submitFunction:this.submitName,label:"Email",value:i,onChangeFunction:this.handleChange,inputType:"email"}),o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},e.map(function(e){var n=a.find(function(t){return t[e]})||0;if(0!==n){var c=Object.values(n);n=Object(s.a)(c,1)[0]}return o.a.createElement(C,{key:e,repoName:e,voteCount:n,isLoaded:r,checkVoteCount:t.checkVoteCount,showVoteButtons:u,toggleVoteButtons:t.toggleVoteButtons,emailAddress:i})})))}}]),e}(a.Component),j=["REACT","ANGULAR","EMBER","VUE"],T=function(){return o.a.createElement(A,{targetRepoNames:j})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(o.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.44879aab.chunk.js.map